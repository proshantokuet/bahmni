
    <div class="dashboard-patientInformation-section" id="patient_information" ng-if="::isDirectiveReady">
        <section bindonce="patient" class="block patientInformation dashboard-section" ng-class="::{'more': patientSummary.show}">





            <table class="patient dashboard-table">
              <tr class="patient-info">
                <td colspan="2">
                    <span class="patient-img">
                            <img  class="patient-image" ng-src="{{::patient.image}}" fallback-src="../images/blank-user.gif">
                        </span>
                        <div class="patient-value">
                             <span class="patient-name">
                                {{::patient.name | titleCase}} ({{::patient.identifier}})</span> -
                             <span class="patient-gender-age" ng-bind-html="::patientAttributeTypes"></span>
                             <span class="patient-estimated-text" ng-if="::patient.birthdateEstimated"> (est.)</span>
                             <!--<span class="patient-gender-age" ng-show="::patient.birthtime">, {{::(patient["SelectanIDcard"].value.display || patient["SelectanIDcard"].value) | booleanFilter}} : {{::(patient["IDno"].value.display || patient["IDno"].value) | booleanFilter}}</span>-->
                             <span class="patient-birth-time" ng-show="::patient.birthtime">
                                 <span>{{ 'TIME_OF_BIRTH_LABEL'|translate }}</span>
                                 <span ng-bind-html="::patient.birthtime | date:'hh:mm a'"></span>
                             </span>
                             <span class="patient-address">
                                 {{::addressLine}}
                             </span>
                             <i class="ipd-indication fa fa-bed" ng-if="::hasBeenAdmitted"></i>
                         </div>
                </td>





              </tr>
              <tr>
                <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
                  <tr ng-repeat="attribute in config.patientAttributes" ng-if="::patient[attribute]"
                    ng-show="::config.patientAttributes.length" ng-class="attribute">
                    <td class="name">{{::patient[attribute].label}}</td>
                    <td class="value" ng-if="::!patient[attribute].isDateField">{{::(patient[attribute].value.display || patient[attribute].value) | booleanFilter}}</td>
                    <td class="value" ng-if="::patient[attribute].isDateField">{{::patient[attribute].value | bahmniDate}}</td>
                </tr>
                <tr ng-if="::relationships && relationships.length > 0">
                    <td>{{ 'PATIENT_PROFILE_RELATIONSHIPS_LABEL'|translate }}</td>
                </tr>
                <tr ng-repeat="relationship in relationships track by relationship.uuid">
                    <td class="name relationshipType" ng-if="::relationship.personA.uuid === patient.uuid">{{::relationship.relationshipType.aIsToB}}</td>
                    <td class="value" ng-if="::relationship.personA.uuid === patient.uuid">
                        <a ng-click="::openPatientDashboard(relationship.personB.uuid)"
                           title="Go to Clinical Dashboard" ng-if="::!isProviderRelationship(relationship)">
                            {{::relationship.personB.display}}
                        </a>
                        <span ng-if="::isProviderRelationship(relationship)">{{::relationship.personB.display}}</span>
                    </td>
                    <td class="name" ng-if="::relationship.personB.uuid === patient.uuid">{{::relationship.relationshipType.bIsToA}}</td>
                    <td ng-if="::relationship.personB.uuid === patient.uuid" class="value">
                        <a ng-click="::openPatientDashboard(relationship.personA.uuid)"
                           title="Go to Clinical Dashboard">
                            {{::relationship.personA.display}}
                        </a>
                    </td>
                </tr>
                </table></td>
                <td><a href="../clinical/index.html#/default/patient/{{patient.uuid}}/dashboard/concept-set-group/observations"  class="title-link">
                            <img  src="./../images/add-Money-Receipt.png" alt="Add Money Receipt" />
                        </a></td>
              </tr>
            </table>


        </section>
    </div>
<script type="text/ng-template" id="dialog">
    <div id="moneyReceiptBySlipNo">
        <table id="moneyReceipt">
                <thead>
                <tr>
                    <th>Service Code</th>
                    <th>Service/Medicine/Other</th>
                    <th>Description</th>
                    <th>Unit Cost</th>
                    <th>Quantity</th>
                    <th>Total Amount</th>
                    <th>Discount</th>
                    <th>Net Payable Amount</th>

                </tr>
                </thead>
                <tbody>

                <tr ng-repeat="service in servicesBySlip">
                    <td>{{service.item.code}} </td>
                    <td>{{service.item.name}} </td>
                    <td>{{service.description}} </td>
                    <td>{{service.unitCost}}</td>
                    <td>{{service.quantity}} </td>
                    <td>{{service.totalAmount}} </td>
                    <td>{{service.discount}}</td>
                    <td>{{service.netPayable}} </td>
                </tr>

                <tr style="border: 1px solid #ddd; background: #699;color: #fff;">
                    <td> </td>
                    <td> </td>
                    <td> </td>
                    <td></td>
                    <td><b>Total</b> </td>
                    <td><b>{{calTotalAmount()}}</b> </td>
                    <td><b>{{calTotalDiscount()}}</b></td>
                    <td><b>{{calTotalNetAmount()}}</b> {{inwords(calTotalNetAmount())}}</td>
                </tr>
                </tbody>
            </table>
        </div>
            <button  style="float: right;margin-top: 10px;" ng-click="closeDialogs()">Close</button> <button  style="float: right;margin-top: 10px;" onclick="printMoneyReceiptBySlipNo()">Print</button>

        </div>

</div>


  </script>
<div class="dashboard-patientInformation-section">
    <h3 style="background: #ddd;padding: 18px;height: 17px; color: #000;">Service history</h3>
<table id="table_id" class="display">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Slip No</th>
                                    <th>Service Name</th>
                                    <th>Description</th>
                                    <th>Unit Cost</th>
                                    <th>Quantity</th>
                                    <th>Total Amount</th>
                                    <th>Discount</th>
                                    <th>Net Payable Amount</th>
                                    <th>Print</th>
                                </tr>
                            </thead>
                            <tbody>

                                <tr ng-repeat="service in services">
                                    <td>{{truncateDate(service.moneyReceiptDate)}} </td>
                                    <td>{{service.slipNo}} </td>
                                    <td>{{service.item}} </td>

                                    <td>{{service.description}} </td>
                                    <td>{{service.unitCost}}</td>
                                    <td>{{service.quantity}} </td>
                                    <td>{{service.totalAmount}} </td>
                                    <td> {{service.discount}}</td>
                                    <td>{{service.netPayable}} </td>
                                    <td><!-- <button ng-click="confirmationPrompt(service.slipNo)">Simple Dialog</button> --></td>
                                </tr>



                            </tbody>
                        </table>

</div>

<script type="text/javascript">

//var $jq = jQuery.noConflict();
setTimeout(function(){
    $(document).ready(function() {
	    $('#table_id').DataTable({
           language: {
           emptyTable: "no service available", //
           loadingRecords: "Please wait .. ", // default Loading...
           zeroRecords: "No matching records found"
          },
          "order": [[ 0, "desc" ]]
        }
        );

    } );
}, 1000);

</script>

    <script>


 function printMoneyReceiptBySlipNo() {
   var divToPrint=document.getElementById("moneyReceiptBySlipNo");
   newWin= window.open("");
   newWin.document.write(divToPrint.outerHTML);
   newWin.print();
   newWin.close();
}
</script>