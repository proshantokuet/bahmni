<div ng-controller="PatientCommonController">
    <div class="box-container box-container-patient-info patient-common-info-container">
        <section>

            <article class="form-field patient-name-wrapper">
                <div class="field-attribute">
                    <label for="patientName">{{ ::'REGISTRATION_LABEL_PATIENT_NAME' | translate}}<span class="asterick">*</span></label>
                </div>

                <div class="field-value patient-name" id="patientName">

              <span data-ng-switch="::isAutoComplete('givenName')" ng-if="::patientConfiguration.local()['showNameField']">
                  <input data-ng-switch-when="true" type="text" id="givenName" ng-model="$parent.patient.givenName" non-blank pattern-validate my-autocomplete source="getAutoCompleteList" response-map="getDataResults" data-item-type="personName" placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_FIRSTNAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_NAME' | translate}}">

                  <input data-ng-switch-default type="text" id="givenName" ng-model="patient.givenName" non-blank pattern-validate placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_FIRSTNAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_NAME' | translate}}">
              </span>

                    <span data-ng-switch="::isAutoComplete('givenName')" ng-if="::!patientConfiguration.local()['showNameField']">
                  <input data-ng-switch-when="true" type="text" id="givenName" ng-model="$parent.patient.givenName" non-blank pattern-validate my-autocomplete source="getAutoCompleteList" response-map="getDataResults" data-item-type="personName" placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_FIRSTNAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_NAME' | translate}}" focus-me="true">

                  <input data-ng-switch-default type="text" id="givenName" ng-model="patient.givenName" non-blank pattern-validate placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_FIRSTNAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_NAME' | translate}}" focus-me="true">
              </span>

                    <span ng-show="::showMiddleName" data-ng-switch="::isAutoComplete('middleName')">
                  <input data-ng-switch-when="true" type="text" id="middleName" ng-model="$parent.patient.middleName" pattern-validate my-autocomplete source="getAutoCompleteList" response-map="getDataResults" data-item-type="personName" placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_MIDDLE_NAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_MIDDLE_NAME' | translate}}">

                  <input data-ng-switch-default type="text" id="middleName" ng-model="patient.middleName" pattern-validate placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_MIDDLE_NAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_MIDDLE_NAME' | translate}}">
              </span>

                    <span ng-show="::showLastName" data-ng-switch="::isAutoComplete('familyName')">
                  <input data-ng-switch-when="true" type="text" id="familyName" ng-model="$parent.patient.familyName" pattern-validate my-autocomplete source="getAutoCompleteList" response-map="getDataResults" data-item-type="personName" placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_LAST_NAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_LAST_NAME' | translate}}" ng-required="::isLastNameMandatory">

                  <input data-ng-switch-default type="text" id="familyName" ng-model="patient.familyName" pattern-validate placeholder="{{ ::'REGISTRATION_LABEL_PATIENT_LAST_NAME' | translate}}" title="{{::'REGISTRATION_LABEL_PATIENT_ENTER_LAST_NAME' | translate}}" ng-required="::isLastNameMandatory">
              </span>

                    <!--<span class="input-label-inline caste-lastname" ng-show="showCasteSameAsLastName()">
                        <input type="checkbox" id="casteSameAsLastNameCheck" ng-model="patient.sameAsLastName"
                               ng-change="setCasteAsLastName()">
                        <label id="casteSameAsLastNameCheckLabel" for="casteSameAsLastNameCheck">{{ 'REGISTRATION_LABEL_CASTE_SAME_LAST_NAME' | translate}}</label>
                    </span>-->
                </div>
                <div class="field-value showOn-desktop" ng-show="::showCasteSameAsLastName()">
                    <input type="checkbox" id="casteSameAsLastNameCheck" ng-model="patient.sameAsLastName" ng-change="setCasteAsLastName()">
                </div>
                <div class="field-attribute" ng-show="::showCasteSameAsLastName()">
                    <label id="casteSameAsLastNameCheckLabel" for="casteSameAsLastNameCheck">{{::'REGISTRATION_LABEL_CASTE_SAME_LAST_NAME'
                        | translate}}</label>
                </div>
                <div class="field-value showOn-small-screen" ng-show="::showCasteSameAsLastName()">
                    <input type="checkbox" id="casteSameAsLastNameCheck" ng-model="patient.sameAsLastName" ng-change="setCasteAsLastName()">
                </div>
            </article>
        </section>
        <section class="form-field form-field-gender">
            <article class="form-field">
                <div class="field-attribute">
                    <label for="gender">{{ ::'REGISTRATION_LABEL_GENDER' | translate}} <span class="asterick">*</span></label>
                </div>

                <div class="field-value">
                    <select id="gender" ng-model="patient.gender" required="required" title="{{ 'REGISTRATION_LABEL_SELECT_GENDER'|translate }}" ng-options="genderMap[genderCode] for genderCode in {{ getGendersToDisplay() }} track by genderCode" ng-change="handleUpdate('gender')">
                        <option value="">{{ ::'REGISTRATION_LABEL_SELECT_GENDER' | translate}}</option>
                    </select>
                </div>
            </article>
        </section>
        <section class="age-wrapper">
            <div ng-if="::!dobMandatory">
                <ng-include src="'views/age.html'"></ng-include>
                <ng-include src="'views/dob.html'"></ng-include>
            </div>
            <div ng-if="::dobMandatory">
                <ng-include src="'views/dob.html'"></ng-include>
                <ng-include src="'views/age.html'"></ng-include>
            </div>
        </section>
    </div>

     <div class="box-container form">
        <legend class="registraion_legend">
            <span class="mylegend asterick">সদস্যের ধরন *</span>
        </legend>
        <section class="form-field form-field-gender">
            <article class="form-field">
                <div class="field-attribute estimated-label">
                    <label>কমিউনিটি ক্লিনিকের আওতাধীন<br></label>
                </div>
                <div class="field-value">
                    <input type="radio" value="কমিউনিটি ক্লিনিকের আওতাধীন" ng-model="patient.memberType" ng-change="checkMemberType(patient.memberType); handleUpdate(patient.memberType)">
                </div>

                <div class="field-attribute estimated-label">
                    <label>বহিরাগত<br></label>
                </div>
                <div class="field-value">
                    <input type="radio" value="বহিরাগত" ng-model="patient.memberType" ng-change="checkMemberType(patient.memberType); handleUpdate(patient.memberType)">
                </div>
            </article>
        </section>
    </div>

    <div class="box-container form" ng-show="patient.showMemberType">
        <legend class="registraion_legend">
            <span class="mylegend" ng-bind-html="::'REGISTRATION_TITLE_RELATIONSHIPS' | translate"></span>
        </legend>

        <div ng-if="patient.showMemberType == false">
        <div patient-relationship patient="patient" ng-if="::relationshipTypes && patient.showMemberType"></div>
        </div>

        <div ng-if="patient.showMemberType == true">
        <div patient-relationship patient="patient" ng-if="::relationshipTypes"></div>
        </div>

    </div>

    <div class="box-container form" ng-show="patient.showMemberType">
        <legend class="registraion_legend">
            <span class="mylegend"> {{ ::'REGISTRATION_LABEL_ADDRESS_INFO' | translate}}</span>
        </legend>

        <section address-fields data-address-levels="::addressLevels" data-address="patient.address" field-validation="::fieldValidation" strict-autocomplete-from-level="::addressHierarchyConfigs.strictAutocompleteFromLevel" ng-if="::!addressHierarchyConfigs.showAddressFieldsTopDown"></section>

        <section top-down-address-fields data-address-levels="::addressLevels" data-address="patient.address" field-validation="::fieldValidation" ng-if="::addressHierarchyConfigs.showAddressFieldsTopDown" strict-autocomplete-from-level="::addressHierarchyConfigs.strictAutocompleteFromLevel"></section>

    </div>

    <div class="box-container form" id="id_idtype">
        <legend class="registraion_legend">
            <span class="mylegend">পরিচয় পত্র</span>
        </legend>
        <section class="form-field-inline-checkbox clearfix">
            <article class="form-field">
                <div class="field-attribute estimated-label">
                    <label>নিচের কোন কোন পরিচয় পত্রটি আছে?<br></label>
                </div>

                <div class="field-attribute estimated-label">
                    <label>জাতীয় পরিচয় পত্র</label>
                </div>
                <div class="field-value">
                    <input type="checkbox" ng-model="patient.nationalIdCheckbox" ng-change="updateNationalIdCheckboxChange(patient.nationalIdCheckbox)">
                </div>
                <div class="field-value">
                    <input type="text" ng-model="patient.nationalId" ng-show="patient.nationalIdCheckbox" pattern="[0-9]{13}" title="National Id must be thirteen digit">
                </div>

                <div class="field-attribute estimated-label">
                    <label>জন্ম নিবন্ধন কার্ড<br></label>
                </div>
                <div class="field-value">
                    <input type="checkbox" ng-model="patient.bridCheckbox" ng-change="updateBRIDCheckboxChange(patient.bridCheckbox)">
                </div>
                <div class="field-value">
                    <input type="text" ng-model="patient.brid" ng-show="patient.bridCheckbox" pattern="[0-9]{13}" title="National Id must be thirteen digit">
                </div>

                <div class="field-attribute estimated-label">
                    <label>ই পি আই কার্ড<br></label>
                </div>
                <div class="field-value">
                    <input type="checkbox" ng-model="patient.epiCheckbox" ng-change="updateEPICheckboxChange(patient.epiCheckbox)">
                </div>
                <div class="field-value">
                    <input type="text" ng-model="patient.epi" ng-show="patient.epiCheckbox" pattern="[0-9]{13}" title="National Id must be thirteen digit">
                </div>

                <div class="field-attribute estimated-label">
                    <label>আই ডি জানা নাই<br></label>
                </div>
                <div class="field-value">
                    <input type="checkbox" ng-model="patient.noidCheckbox" ng-change="updateNoIDCheckboxChange(patient.noidCheckbox)">
                </div>
            </article>
        </section>
    </div>

    <div class="box-container form">

        <legend class="registraion_legend" ng-if="patientConfiguration.customAttributeRows().length > 0">
            <span class="mylegend">সাধারণ তথ্য <!-- {{ ::'REGISTRATION_LABEL_OTHER_INFO' | translate}} --></span>
        </legend>

        <section id="otherInfo" class="form-field-inline clearfix" ng-repeat="attributeRow in ::patientConfiguration.customAttributeRows()">
            <article class="form-field" ng-repeat="attribute in ::attributeRow" ng-class="::{'right-form-field' : $index%2 != 0}">
                <span ng-show="getShowValueString(attribute.name)">
                    <attribute-types target-model="patient" attribute="::attribute" field-validation="::fieldValidation" is-auto-complete="isAutoComplete" get-auto-complete-list="getAutoCompleteList" get-data-results="getDataResults" is-read-only="isReadOnly" handle-update="handleUpdate"></attribute-types>
                </span>
            </article>
        </section>
    </div>

    <div class="additional-info-wrapper">

        <div class="box-container form" ng-show="patient.showRiskyHabits && patient.showMemberType">
            <legend class="registraion_legend">
                <span class="mylegend">ঝুকিপূর্ন অভ্যাস</span>
            </legend>
            <section class="form-field-inline-checkbox clearfix">
                <article class="form-field" ng-repeat="x in riskyHabits" ng-class="::{'right-form-field' : $index%2 != 0}">
                    <div class="field-attribute estimated-label">
                        <label>{{ x.benName }}<br></label>
                    </div>
                    <div class="field-value">
                        <input id="{{ x.id }}" type="checkbox" ng-model="patient.riskyHabit[x.engName]" ng-change="updateRiskyHabitCheckboxChange(x, patient.riskyHabit[x])">
                    </div>
                </article>
            </section>
        </div>

        <div class="box-container form" ng-show="patient.showMemberType">
            <legend class="registraion_legend">
                <span class="mylegend">রোগ</span>
            </legend>
            <section class="form-field-inline-checkbox clearfix">
                <article class="form-field">
                    <div class="field-attribute estimated-label">
                        <label>কোন রোগ আছে কি<br></label>
                    </div>

                    <div class="field-attribute estimated-label">
                        <label>হ্যাঁ<br></label>
                    </div>
                    <div class="field-value">
                        <input type="radio" value="হ্যাঁ" ng-model="patient.yesNoCheckbox" ng-change="updateYesNoCheckboxChange(patient.yesNoCheckbox)">
                    </div>

                    <div class="field-attribute estimated-label">
                        <label>না<br></label>
                    </div>
                    <div class="field-value">
                        <input type="radio" value="না" ng-model="patient.yesNoCheckbox" ng-change="updateYesNoCheckboxChange(patient.yesNoCheckbox)">
                    </div>
                </article>
            </section>
        </div>

        <div class="box-container form" ng-show="patient.showDiseaseStatus && patient.showMemberType">
            <section class="form-field-inline-checkbox clearfix">
                <article class="form-field" ng-repeat="x in diseaseStatus" ng-class="::{'right-form-field' : $index%2 != 0}">
                    <div ng-if="patient.diseaseStartIndex <= $index && patient.diseaseEndIndex >= $index">
                        <div class="field-attribute estimated-label">
                            <label>{{ x.benName }}<br></label>
                        </div>
                        <div class="field-value">
                            <input type="checkbox" ng-model="patient.diseaseStatus[x.engName]" ng-change="updateDiseaseStatusCheckboxChange(x, patient.diseaseStatus[x])">
                        </div>
                    </div>
                </article>
            </section>
        </div>

        <div class="box-container form" ng-show="patient.showMemberType">
            <legend class="registraion_legend">
                <span class="mylegend">পারিবারিক রোগ সম্পর্কিত  তথ্য</span>
            </legend>

            <section class="form-field-inline-checkbox clearfix">
                <article class="form-field" ng-repeat="x in familyDiseaseHistory" ng-class="::{'right-form-field' : $index%2 != 0}">
                    <div class="field-attribute estimated-label">
                        <label>{{ x.benName }}<br></label>
                    </div>
                    <div class="field-value">
                        <input type="checkbox" ng-model="patient.familyDiseaseHistory[x.engName]" ng-change="updatefamilyDiseaseHistoryCheckboxChange(x, patient.familyDiseaseHistory[x])">
                    </div>
                </article>
            </section>
        </div>

    </div>
</div>
